---
layout: post
title: 캡슐화, 응집도, 결합도
author: Bong5
categories: [Java, Books/Object]
---

## 오브젝트

---

#### 데이터 중심 관점의 폐해

앞선 챕터에서 __역할, 책임, 협력__ 의 관점에서 객체지향 설계를 하는것의 중요성을 살펴보았다.

지금까지 우리는 __객체는 자율적으로 판단하고 행동하며 스스로를 책임지는 존재__ 라고 배웠다. 즉, 자율적으로 __행동__ 하는 객체에 대해 공부했다.

만일 객체를 단순히 데이터의 집합으로 본다면 어떻게 될까?

가장 먼저 __캡슐화__ 가 저해된다. 왜일까? 그 이유를 살펴보자.

객체를 데이터 중심의 관점으로 바라보게 된다면 __내부 구현이 퍼블릭 인터페이스에 노출__ 될 확률이 높아진다. 좀 더 구체적인 예시를 든다면 객체가 가진 __데이터__ 에 대한 구체적인 명칭을 활용하게끔 퍼블릭 인터페이스를 설계할 가능성이 높아진다.

__customer.getBag().setMoney()__ 와 같은 예시를 들 수 있겠다. __customer__ 객체의 __Bag__ 이라는 데이터의 __Money__ 라는 데이터를 활용하려는 목적이 너무 상세한 수준으로 인터페이스에 들어나게 되면서 캡슐화가 저해된다.

또한 __데이터는 구현에 속한다.__ 그리고 __구현은 불안정 하기 때문에 변하기가 쉽다.__
만일 데이터를 객체 분할의 중심축으로 삼게 된다면 __구현에 관한 세부사항이 객체의 인터페이스에 스며들게 되고 캡슐화의 원칙이 무너지게 된다.__ 즉, 상태 변경으로 인터페이스의 변경이 초래될 것이고 인터페이스에 의존하는 다른 객체들에게 변경의 여파가 미치는 상황이 오게 된다.

이 외에도 여러가지 이유가 있지만 중요한 것은 __객체의 책임에 초점__ 을 맞춰야 한다는 것이다. 객체와 객체의 상호작용인 __책임__ 에 초점을 맞추게 된다면 자연스럽게 응집도는 높고 결합도는 낮은 설계가 탄생할 것이다.

왜그럴까?

객체의 책임, 즉 행동에 초점을 맞춤으로써 행동을 수행하기 위해 알아야 하는 데이터가 파생되고 결국 자신의 데이터를 스스로 책임지는 응집도 높은 객체가 탄생하기 때문이다. 그리고 데이터를 스스로 책임지고 처리하기 때문에 다른 객체들에게 불필요한 의존을 하지 않아 결합도는 낮게 유지된다.

이번에는 좀더 세부적으로 __캡슐화, 응집도, 결합도__ 측면에서의 객체지향 설계를 살펴보자.

---

### 캡슐화

상태와 행동을 하나의 객체안에 모으는 이유는 __객체의 내부 구현을 외부로 부터 감추기 위함__ 이다. 여기서 내부 구현이란 __나중에 변겨오딜 가능성이 높은 어떤 것__ 을 가리킨다. 객체지향이 강력한 이유는 한 곳에서 일어난 변경이 전체 시스템에 영향을 끼치지 않도록 파급효과를 적절히 조절할 수 있는 장치를 제공하기 때문이다. 객체를 사용하면 __변경 가능성이 높은 부분은 내부에 숨기고 외부에는 상대적으로 안정적인 부분만 공개함__ 으로써 변경의 여파를 통제할 수 있다.

변경될 가능성이 높은 부분을 __구현__ 이라 부르고 상대적으로 안정적인 부분을 __인터페이스__ 라고 부른다는 사실을 기억하자. 객체를 설계하기 위한 가장 기본적인 아이디어는 __변경의 정도에 따라 구현과 인터페이스를 분리하고 외부에서는 인터페이스에만 의존하도록 관계를 조절__ 하는 것이다.

지금까지 설명한 내용에서 알 수 있는 것처럼 객체지향에서 가장 중요한 원리는 __캡슐화__ 이다.

>> 캡슐화는 외부에서 알 필요가 없는 부분을 감춤으로써 대상을 단순화하는 추상화의 한 종류

객체지향 설계의 가장 중요한 원리는 __불안정한 구현 세부사항을 안정적인 인터페이스 뒤로 캡슐화 하는 것__ 이다.
즉, 캡슐화가 중요한 이유는 __불안정한 부분과 안정적인 부분을 분리해서 변경의 영향을 통제__ 할 수 있기 때문이다.

정리하자면 캡슐화란 변경 가능성이 높은 부분을 객체 내부로 숨기는 추상화 기법이다. 객체 내부에 무엇을 캡슐화 해야할까? __변경될 수 있는 어떤 것이라도 캡슐화__ 해야 한다.

---

### 응집도와 결합도

__응집도는 모듈에 포함된 내부 요소들이 연관된 정도__ 를 나타낸다. 모듈 내의 요소들이 하나의 목적을 위해 긴밀하게 협력한다면 그 모듈은 높은 응집도를 가진다. 모듈 내의 요소들이 서로 다른목적을 추구한다면 그 모듈은 낮은 응집도를 갖는다. 객체지향 관점에서 응집도는 객체 또는 클래스에 __얼마나 관련높은 책임들을 할당했는지__ 를 나타낸다.

__결합도는 의존성의 정도__ 를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고있는지를 나타내는 척도다. 어떤 모듈이 다른 모듈에 대해 너무 자세한 부분까지 알고있다면 두 모듈은 높은 결합도를 가진다. 어떤 모듈이 다른 모듈에 대해 꼭 필요한 지식만 알고 있다면 두 모듈은 낮은 결합도를 가진다. 객체지향 관점에서 결합도는 객체 또는 클래스가 __협려겡 필요한 적절한 수준의 관계만을 유지__ 하고 있는지를 나타낸다.

응집도와 결합도의 의미를 이해하기 위한 첫 걸음은 __두 개념 모두 설계/변경과 관련이 있다는 사실을 이해하는 것__ 이다. 일반적으로 좋은 설계란 높은 응집도와 낮은 ㅁ=결합도를 가진 모듈로 구성된 설계를 의미한다. 다시말해 어플리케이션을 구성하는 각 요소의 응집도가 높고 서로 느슨하게 결합돼 있다면 그 어플리케이션은 좋은 설계를 가졌다고 볼 수 있다.

좋은 설계란 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계다. 그리고 좋은 설계를 만들기 위해서는 높은 응집도와 낮은 결합도를 추구해야 한다. 따라서 __응집도와 결합도는 변경과 관련된 것__ 이다.

>> 높은 응집도와 낮은 결합도를 가진 설계를 추구해야 하는 이유는 단 한가지다. 그것이 설계를 변경하기 쉽게 만들기 때문이다.

변경의 관점에서 응집도란 __변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도__ 로 측정할 수 있다.

- 하나의 변경을 수용하기 위해 모듈 전체가 함께 변경된다면 응집도가 높은 것

- 하나의 변경을 수용하기 위해 모듈의 일부만 변경된다면 응집도가 낮은 것

- 하나의 변경에 대해 하나의 모듈만 변경된다면 응집도가 높은 것

- 하나의 변경에 대해 다수의 모듈이 함께 변경되어야 한다면 응집도가 낮은 것

위 설명에서 알 수 있듯이 __응집도가 높은 설계에서는 하나의 요구사항 변경을 반영하기 위해 오직 하나의 모듈만 수정__ 하면 된다. 반면 응집도가 낮은 설계에서는 하나의 원인에 의해 __변경해야 하는 부분이 다수의 모듈에 걸쳐 분산__ 되어 있기 때문에 여러 모듈을 동시에 수정해야 한다.
응집도가 높을 수록 변경의 대상과 범위가 명확해지기 때문에 코드를 변경하기 쉬워진다.

결합도 역시 변경의 관점에서 설명할 수 있다. 결합도는 __한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도__ 로 측정할 수 있다. 다시말해 __하나의 모듈을 수정할 때 얼마나 많은 모듈을 함께 수정해야 하는지__ 를 나타낸다. 결합도가 높으면 높을수록 함께 변경해야 하는 모듈의 수가 늘어나기 때문에 변경하기가 어려워진다.

영향을 받는 모듈의 수 이외에도 __변경의 원인__ 을 이용해 결합도의 개념을 설명할 수도 있다. __내부 구현을 변경했을 때 다른 모듈에 영향을 미치는 경우__ 에도 결합도가 높다고 표현한다. 반면 퍼블릭 인터페이스를 변경했을 때만 다른 모듈에 영향을 미치는 경우에는 결합도가 낮다고 표현한다. 따라서 __클래스의 내부 구현이 아닌 인터페이스에 의존하도록 코드를 작성해야 낮은 결합도를 유지__ 할 수 있다.

다시한번 강조하지만 __응집도와 결합도는 변경과 관련이 깊다.__ 어떤 설계를 쉽게 변경할 수 있다면 높은 응집도를 가진 요소들로 구성돼 있고 요소들 사이의 결합도가 낮을 확률이 높다. 응집도와 결합도를 __변경의 관점__ 에서 바라보자

---

### 데이터 중심 설계의 문제점

책임 중심의 설계와 데이터 중심 설계의 근본적인 차이점은 __캡슐화__ 를 다루는 방식이다. 데이터 중심의 설계에서는 캡슐화를 위반하고 객체의 내부 구현을 인터페이스의 일부로 만든다. 반면 __책임 중심 설계는 객체 내부 구현을 안정적인 인터페이스 뒤로 캡슐화__ 한다.

>> 캡슐화의 정도가 객체의 응집도과 결합도를 결정한다는 사실을 기억하자.

데이터 중심의 설계는 캡슐화를 위반하기 쉽기 때문에 책임 중심 설계에 비해 응집도가 낮고 결합도가 높은 객체들을 양산하게 될 가능성이 높다.

- 캡슐화 위반

- 높은 결합도

- 낮은 응집도





























### 참고 및 출처
  - 오브젝트
